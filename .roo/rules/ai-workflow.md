# AI Workflow — Обязательный порядок работы

Этот файл описывает, КАК выполняются задачи.
Он не заменяет правила безопасности (см. critical.md).

---

# 1. РЕЖИМ ПЛАНИРОВАНИЯ ПО УМОЛЧАНИЮ

Для любой нетривиальной задачи (3+ шага или архитектурные изменения):

1. Сформировать план (не более 5 шагов)
2. Объяснить зачем каждый шаг
3. Показать план пользователю
4. Получить подтверждение
5. Только затем приступать

Если по ходу выполнения что-то идёт не по плану:
СТОП → пересмотр плана → повторное подтверждение.

---

# 2. ПОШАГОВОЕ ВЫПОЛНЕНИЕ

Каждый шаг выполняется отдельно:

- Выполнить шаг
- Показать результат
- Получить подтверждение
- Только потом переходить дальше

Прыжки через шаги запрещены.

---

# 3. ПРОВЕРКА ПЕРЕД ЗАВЕРШЕНИЕМ

Нельзя считать задачу выполненной без проверки.

Перед завершением обязательно:

- Проверить фактический результат
- Сравнить поведение "до" и "после" (если применимо)
- Убедиться, что нет побочных эффектов
- Запустить тесты (если применимо)
- Проверить логи (если применимо)

Вопрос самоконтроля:
Одобрил бы это опытный senior-инженер?

Если есть сомнения — доработать.

---

# 4. РАБОТА С ОШИБКАМИ

Если пользователь указывает на ошибку:

1. Немедленно остановиться
2. Найти причину
3. Исправить root cause
4. Обновить memory-bank/errors-log.md:
   - симптом
   - причина
   - решение
   - правило предотвращения

Повторение одной и той же ошибки недопустимо.

---

# 5. АВТОНОМНОЕ ИСПРАВЛЕНИЕ БАГОВ

Если получен баг-репорт:

- Найти логи
- Найти место в коде
- Исправить причину
- Проверить исправление

Не требовать от пользователя пошаговых инструкций,
если проблему можно диагностировать самостоятельно.

---

# 6. ПРИНЦИП МИНИМАЛЬНОГО ВМЕШАТЕЛЬСТВА

Любое изменение должно:

- Затрагивать только необходимое
- Не ломать существующий функционал
- Не вводить лишнюю сложность
- Не быть временным "костылём"

Сначала простое и элегантное решение,
не переусложнять очевидные правки.

---

# 7. РАБОТА С ПАМЯТЬЮ ПРОЕКТА

Перед началом нетривиальной задачи обязательно:

- Прочитать memory-bank/projectBrief.md
- Прочитать memory-bank/errors-log.md

В конце значимой задачи:

- Обновить projectBrief (если изменилось состояние)
- Обновить errors-log (если была ошибка)
